---
date: '2010-12-03T05:57:00.000-08:00'
description: ''
published: true
slug: 2010-12-stupid-template-languages
tags:
- rant
- django
- javascript
- plone
- python
- xml
- zope
- legacy
time_to_read: 5
title: Stupid Template Languages
---

For years I've been absolutely certain that I really prefer stupid template languages any time I'm generating HTML. The less the template language can do the better. Since I spend most of my time coding in <a href="http://python.org/">Python</a> you might assume this applies just to Python, but I think it also applies to anything where you have the power to readily mix HTML generation and code.<br /><br />The biggest annoyance I have with smart template languages (<a href="http://www.makotemplates.org/">Mako</a>, <a href="http://genshi.edgewall.org/">Genshi</a>, <a href="http://jinja.pocoo.org/">Jinja2</a>, <a href="http://php.org/">PHP</a>, <a href="http://www.perl.org/">Perl</a>,&nbsp;<a href="http://en.wikipedia.org/wiki/ColdFusion">ColdFusion</a>,&nbsp;etc) is that you have the capability to mix core business logic with your end views, hence violating the rules of Model-View-Controller architecture. While the web can be hard to match to MVC, in general you aren't supposed to do that sort of thing.&nbsp;I've made the mistake of putting core logic in the wrong places in the past, but I'm proud to say I've gotten good at avoiding that particular mistake.<br /><br /><b>I don't work in a vacuum.</b><br /><br />I often work on projects crafted by others, some who decided for arcane/brilliant/idiotic reasons to mix the&nbsp;kernel&nbsp;of their applications in template function/macros. This is only possible in Smart Template Languages! If they were using a Stupid Template Language they would have been forced put their kernel code in a Python file where it applies, not in a template that was supposed to just render HTML or XML or plain text.<br /><br />What it comes down to is that Smart Template Languages designers assume that developers are smart enough to avoid making this mistake. Stupid Template Languages designers assume that developers generally lack the discipline to avoid creating horrific atrocities that because of unnecessary complexity have a bus factor of 1.<br /><br /><b>So what is a Smart Template Language?</b><br /><br /><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><b></b>In my own vernacular, template languages that let you write functions/macros are what I call a <b>Smart Template Language</b>. Some of them are brilliantly executed, the example of Jinja2 comes to mind, but invariably I suffer through abuse of its Macro control structure as implemented by others.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><b><br /></b></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><b>Misery Cubed a.k.a. Genius Template Languages</b></div><br />Next comes&nbsp;<b>Genius Template Languages</b>, which take things a step further. These template languages allow you to not only define functions/macros, but also let you embed unrestricted Python (or <a href="http://www.ruby-lang.org/en/">Java</a> or <a href="http://www.ruby-lang.org/en/">Ruby</a> or whatever) in the template. This 'feature' lets you code your entire application in the templates! &nbsp;In the Python world what comes to mind is Mako and Genshi, but I'm sure there are many other tools with this 'capability'.<br /><br /><b>I like Stupid Template Languages!</b><br /><br /><b></b>Stupid Template Languages don't let you define functions/macros. They don't let you embed Python code. They barely let you define variables and often have simplistic control architectures.<br /><br />For Django efforts, which is about 70% of my work, I like the <a href="http://docs.djangoproject.com/en/dev/topics/templates/">Django Template Language</a> (DTL). Since it is used by a huge community, there are a ton of useful apps which have it as a dependency. Switching away from it would mean cutting myself off from a <a href="http://djangopackages.com/">large ecosphere of tools</a>&nbsp;I can use to not reinvent the wheel.<br /><br />Back in my <a href="http://bluebream.zope.org/">Zope</a>/<a href="http://plone.org/">Plone</a> days I really, really enjoyed the <a href="http://en.wikipedia.org/wiki/Template_Attribute_Language">Template Attribute Language</a> (TAL) because it was stupid too. If I needed an XML generation template language and could import it easily I might consider using it again, or perhaps <a href="http://chameleon.repoze.org/docs/latest/zpt.html">Chameleon</a>, which is a new, improved version . The downside is that they come paired with another tool paired with it, METAL, which gave it macros. My own experience with METAL is that it was all too easy to do what we developers do with Smart Template Languages.<br /><br /><b>But DTL and TAL are slow!</b><br /><br /><b></b>So what?<br /><br />If you want to boost your performance, first try caching. There are a ton of tools you can use, with <a href="http://www.varnish-cache.org/">Varnish</a> being one I keep seeing in action. Read the docs on your favorite web framework's caching engine and apply what you learn. And Djangonauts should read up on <a href="http://www.slideshare.net/mmalone/scaling-django-1393282">Mike Malone</a> as much as possible.<br /><br />If after all that the site still delivers slow content and it appears to be a template language issue, then identify the bottleneck content and consider alternatives for that one portion. My favorite response is a bit of <a href="http://en.wikipedia.org/wiki/AJAX">AJAX</a>. Use your framework to render the content as <a href="http://en.wikipedia.org/wiki/JSON">JSON</a> and have <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a> parse it into legible content, a task which <a href="http://en.wikipedia.org/wiki/JQuery">JQuery</a> makes trivial.